examples:
  # --- Disambiguation: KPI vs Data for same table name ---
  - question: "What was the edge on our market trades?"
    sql: |
      SELECT
        symbol,
        COUNT(*) AS trade_count,
        ROUND(AVG(edge), 4) AS avg_edge,
        ROUND(SUM(instant_pnl), 2) AS total_pnl
      FROM `{project}.{kpi_dataset}.markettrade`
      WHERE trade_date = '2026-02-17'
      GROUP BY symbol
      ORDER BY total_pnl DESC
    tables_used: [markettrade]
    dataset: "{kpi_dataset}"
    complexity: medium
    routing_signal: "edge = KPI metric -> KPI.markettrade, NOT data.markettrade"
    validated: false
    validated_by: ""

  - question: "What was the theo price for EMBRACB options?"
    sql: |
      SELECT
        strike,
        ROUND(tv, 4) AS theo,
        ROUND(delta, 4) AS delta,
        ROUND(vol, 4) AS vol
      FROM `{project}.{data_dataset}.theodata`
      WHERE trade_date = '2026-02-17'
        AND symbol = 'EMBRACB'
      ORDER BY strike
      LIMIT 50
    tables_used: [theodata]
    dataset: "{data_dataset}"
    complexity: simple
    routing_signal: "theo/vol -> data.theodata (only exists in data)"
    validated: false
    validated_by: ""

  - question: "How many trades did we do by symbol across all types?"
    sql: |
      SELECT symbol, COUNT(*) AS trade_count, ROUND(SUM(instant_pnl), 2) AS total_pnl
      FROM `{project}.{kpi_dataset}.markettrade`
      WHERE trade_date = '2026-02-17'
      GROUP BY symbol
      ORDER BY total_pnl DESC
    tables_used: [markettrade]
    dataset: "{kpi_dataset}"
    complexity: medium
    routing_signal: "all types by symbol -> markettrade (superset of all trade types, avoids double-counting)"
    validated: false
    validated_by: ""

  - question: "What's in the swing data?"
    sql: |
      SELECT *
      FROM `{project}.{data_dataset}.swingdata`
      WHERE trade_date = '2026-02-17'
      LIMIT 20
    tables_used: [swingdata]
    dataset: "{data_dataset}"
    complexity: simple
    routing_signal: "swing -> data.swingdata (only exists in data)"
    validated: false
    validated_by: ""

  - question: "What does the order book look like for EMBRACB?"
    sql: |
      SELECT *
      FROM `{project}.{data_dataset}.marketdepth`
      WHERE trade_date = '2026-02-17'
        AND symbol = 'EMBRACB'
      LIMIT 20
    tables_used: [marketdepth]
    dataset: "{data_dataset}"
    complexity: simple
    routing_signal: "order book / depth -> data.marketdepth (NOT marketdata)"
    validated: false
    validated_by: ""

  - question: "Show me market data feed for EMBRACB"
    sql: |
      SELECT *
      FROM `{project}.{data_dataset}.marketdata`
      WHERE trade_date = '2026-02-17'
        AND symbol = 'EMBRACB'
      LIMIT 20
    tables_used: [marketdata]
    dataset: "{data_dataset}"
    complexity: simple
    routing_signal: "market data / price feed -> data.marketdata (NOT marketdepth)"
    validated: false
    validated_by: ""

  # --- Disambiguation: quoter KPI vs data ---
  - question: "What levels was the quoter quoting at 11:15?"
    sql: |
      SELECT
        symbol,
        trade_price,
        trade_size,
        trade_side
      FROM `{project}.{data_dataset}.quotertrade`
      WHERE trade_date = '2026-02-17'
      LIMIT 20
    tables_used: [quotertrade]
    dataset: "{data_dataset}"
    complexity: simple
    routing_signal: "quoting levels / raw activity -> data.quotertrade (NOT kpi.quotertrade)"
    validated: false
    validated_by: ""

  - question: "What was the quoter edge and PnL?"
    sql: |
      SELECT
        symbol,
        COUNT(*) AS fill_count,
        ROUND(AVG(instant_edge), 4) AS avg_edge,
        ROUND(SUM(instant_pnl), 2) AS total_pnl,
        ROUND(SUM(mark_to_mid_pnl), 2) AS skew_pnl
      FROM `{project}.{kpi_dataset}.quotertrade`
      WHERE trade_date = '2026-02-17'
      GROUP BY symbol
      ORDER BY total_pnl DESC
    tables_used: [quotertrade]
    dataset: "{kpi_dataset}"
    complexity: medium
    routing_signal: "quoter edge / PnL / performance -> kpi.quotertrade (NOT data.quotertrade)"
    validated: false
    validated_by: ""

  # --- Swing data vs otoswing KPI ---
  - question: "How fast were our swings executing?"
    sql: |
      SELECT
        symbol,
        COUNT(*) AS swing_count,
        ROUND(AVG(latency_stats_vtio), 0) AS avg_vt_decision_us,
        ROUND(AVG(latency_stats_itio), 0) AS avg_order_send_us
      FROM `{project}.{data_dataset}.swingdata`
      WHERE trade_date = '2026-02-17'
      GROUP BY symbol
      ORDER BY swing_count DESC
    tables_used: [swingdata]
    dataset: "{data_dataset}"
    complexity: medium
    routing_signal: "swing speed / latency -> data.swingdata (latency only in data, NOT kpi.otoswing)"
    validated: false
    validated_by: ""

  - question: "What was the swing PnL compared to the fired price?"
    sql: |
      SELECT
        symbol,
        COUNT(*) AS swing_count,
        ROUND(SUM(instant_pnl), 2) AS pnl_fill,
        ROUND(SUM(instant_pnl_fired_at), 2) AS pnl_fired
      FROM `{project}.{kpi_dataset}.otoswing`
      WHERE trade_date = '2026-02-17'
      GROUP BY symbol
      ORDER BY pnl_fill DESC
    tables_used: [otoswing]
    dataset: "{kpi_dataset}"
    complexity: medium
    routing_signal: "swing PnL / performance -> kpi.otoswing (NOT data.swingdata)"
    validated: false
    validated_by: ""

  # --- CRITICAL: Double-counting pitfall ---
  # markettrade is the SUPERSET of ALL trades (Mako + counterparties).
  # quotertrade, brokertrade, clicktrade, otoswing are Mako-only SUBSETS.
  # NEVER sum or UNION markettrade with the other tables.

  - question: "What was the total PnL today?"
    sql: |
      SELECT
        ROUND(SUM(instant_pnl), 2) AS total_pnl,
        COUNT(*) AS trade_count
      FROM `{project}.{kpi_dataset}.markettrade`
      WHERE trade_date = '2026-02-17'
    tables_used: [markettrade]
    dataset: "{kpi_dataset}"
    complexity: simple
    routing_signal: >-
      total PnL -> markettrade ALONE (superset of all trade types).
      NEVER UNION markettrade with quotertrade/brokertrade/clicktrade/otoswing — that double-counts.
    validated: false
    validated_by: ""

  - question: "Show me PnL broken down by trade type"
    sql: |
      SELECT 'quotertrade' AS trade_type, ROUND(SUM(instant_pnl), 2) AS total_pnl, COUNT(*) AS count
      FROM `{project}.{kpi_dataset}.quotertrade`
      WHERE trade_date = '2026-02-17'
      UNION ALL
      SELECT 'brokertrade', ROUND(SUM(instant_pnl), 2), COUNT(*)
      FROM `{project}.{kpi_dataset}.brokertrade`
      WHERE trade_date = '2026-02-17'
      UNION ALL
      SELECT 'clicktrade', ROUND(SUM(instant_pnl), 2), COUNT(*)
      FROM `{project}.{kpi_dataset}.clicktrade`
      WHERE trade_date = '2026-02-17'
      UNION ALL
      SELECT 'otoswing', ROUND(SUM(instant_pnl), 2), COUNT(*)
      FROM `{project}.{kpi_dataset}.otoswing`
      WHERE trade_date = '2026-02-17'
      ORDER BY total_pnl DESC
    tables_used: [quotertrade, brokertrade, clicktrade, otoswing]
    dataset: "{kpi_dataset}"
    complexity: complex
    routing_signal: >-
      PnL by trade type -> UNION ALL of 4 Mako-only tables (quotertrade, brokertrade,
      clicktrade, otoswing). Does NOT include markettrade because markettrade is the
      superset containing ALL participants' trades — including it would double-count.
    validated: false
    validated_by: ""

  - question: "What was Mako's total PnL across all our trade types?"
    sql: |
      SELECT
        ROUND(SUM(pnl), 2) AS mako_total_pnl,
        SUM(cnt) AS mako_total_trades
      FROM (
        SELECT SUM(instant_pnl) AS pnl, COUNT(*) AS cnt FROM `{project}.{kpi_dataset}.quotertrade` WHERE trade_date = '2026-02-17'
        UNION ALL
        SELECT SUM(instant_pnl), COUNT(*) FROM `{project}.{kpi_dataset}.brokertrade` WHERE trade_date = '2026-02-17'
        UNION ALL
        SELECT SUM(instant_pnl), COUNT(*) FROM `{project}.{kpi_dataset}.clicktrade` WHERE trade_date = '2026-02-17'
        UNION ALL
        SELECT SUM(instant_pnl), COUNT(*) FROM `{project}.{kpi_dataset}.otoswing` WHERE trade_date = '2026-02-17'
      )
    tables_used: [quotertrade, brokertrade, clicktrade, otoswing]
    dataset: "{kpi_dataset}"
    complexity: complex
    routing_signal: >-
      Mako total PnL -> UNION ALL 4 Mako tables only. markettrade is excluded because
      it contains ALL participants (Mako + counterparties), not just Mako.
    validated: false
    validated_by: ""
