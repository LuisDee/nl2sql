table:
  name: quoterdelete
  dataset: "{dataset_prefix}euronext_data"
  fqn: '{project}.{dataset_prefix}euronext_data.quoterdelete'
  layer: data
  description: "Quoter delete and cancel events recording when the auto-quoter removes or cancels resting quotes from the order book. Contains the instrument, side, timestamp, and reason for the deletion. Partitioned by trade_date."
  partition_field: trade_date
  columns:
    - name: kafka_partition
      type: INTEGER
      description: Kafka partition number from which this record was consumed. Used internally for data pipeline
        tracking and replay.
      category: identifier
      filterable: true
    - name: kafka_offset
      type: INTEGER
      description: Kafka offset of the record within its partition. Used for exactly-once processing guarantees and data
        pipeline replay.
      category: identifier
      filterable: true
    - name: symbol
      type: STRING
      description: Mako symbol identifier for the traded instrument.
      category: dimension
      filterable: true
    - name: portfolio
      type: STRING
      description: Name of the Mako portfolio to which the algo belongs.
      category: dimension
      filterable: true
    - name: trade_date
      type: DATE
      description: Trading session date used as the partition column. Always filter on this field for efficient queries.
      category: time
      filterable: true
    - name: instrument_hash
      type: STRING
      description: Unique SHA256 hash identifier for the instrument, deterministically computed from the instrument
        defining attributes. Used as the primary join key across all data and KPI tables.
      category: identifier
      filterable: true
    - name: algo
      type: STRING
      description: Name of the originating trading algorithm or strategy.
      category: dimension
      filterable: true
    - name: ref_curve_id
      type: INTEGER
      description: ID of the vol curve for this symbol.
      category: identifier
      filterable: true
    - name: ref_carry_id
      type: INTEGER
      description: Reference carry id from the last vol curve update (theoServer callback).
      category: identifier
      filterable: true
    - name: ref_tv
      type: FLOAT
      description: Theoretical value of instrument on last curve ID update.
      category: measure
      typical_aggregation: AVG
    - name: ref_delta
      type: FLOAT
      description: Delta of instrument on last vol curve update.
      category: measure
      typical_aggregation: AVG
    - name: ref_gamma
      type: FLOAT
      description: Gamma of instrument on last vol curve update.
      category: measure
      typical_aggregation: AVG
    - name: ref_base_price
      type: FLOAT
      description: Unadjusted raw baseval on last vol curve update.
      category: measure
      typical_aggregation: AVG
    - name: ref_roll
      type: FLOAT
      description: Roll value on last curve update.
      category: measure
      typical_aggregation: AVG
    - name: raw_bv_bid
      type: FLOAT
      description: Unadjusted base val bid price at time of swing.
      category: measure
      typical_aggregation: AVG
    - name: raw_bv_bid_size
      type: INTEGER
      description: Target size of raw base val bid price.
      category: measure
      typical_aggregation: SUM
    - name: raw_bv_ask
      type: FLOAT
      description: Unadjusted base val ask price at time of swing.
      category: measure
      typical_aggregation: AVG
    - name: raw_bv_ask_size
      type: INTEGER
      description: Target size of raw base val ask price.
      category: measure
      typical_aggregation: SUM
    - name: layered_base_bid
      type: FLOAT
      description: Transformation of base val bid incorporating open delta position.
      category: measure
      typical_aggregation: AVG
    - name: layered_base_bid_size
      type: INTEGER
      description: Max number of deltas willing to take on at layered base bid.
      category: measure
      typical_aggregation: SUM
    - name: layered_base_ask
      type: FLOAT
      description: Transformation of base val ask.
      category: measure
      typical_aggregation: AVG
    - name: layered_base_ask_size
      type: INTEGER
      description: Max number of deltas willing to take on at layered base ask.
      category: measure
      typical_aggregation: SUM
    - name: layered_base_adjustment
      type: FLOAT
      description: Adjustment to relevant raw baseval side.
      category: measure
      typical_aggregation: AVG
    - name: odr_adjustment
      type: FLOAT
      description: Adjustment to raw base val due to open delta retreat.
      category: measure
      typical_aggregation: AVG
    - name: inflight_deflection_tv_adjustment_bid
      type: FLOAT
      description: Estimated TV adjustment while waiting for fill confirmation (bid).
      category: measure
      typical_aggregation: AVG
    - name: inflight_deflection_tv_adjustment_ask
      type: FLOAT
      description: Estimated TV adjustment while waiting for fill confirmation (ask).
      category: measure
      typical_aggregation: AVG
    - name: internal_tv_adjustment_bid
      type: FLOAT
      description: Internal adjustment/deflection made by VT after hearing about a fill (bid).
      category: measure
      typical_aggregation: AVG
    - name: internal_tv_adjustment_ask
      type: FLOAT
      description: Internal adjustment/deflection made by VT after hearing about a fill (ask).
      category: measure
      typical_aggregation: AVG
    - name: nhr_adjustment_bid
      type: FLOAT
      description: Estimated adjustment to bid edge based on current position in local strikes.
      category: measure
      typical_aggregation: AVG
    - name: nhr_adjustment_ask
      type: FLOAT
      description: Estimated adjustment to ask edge based on current position in local strikes.
      category: measure
      typical_aggregation: AVG
    - name: base_edge_bid
      type: FLOAT
      description: Net edge of bid side (model edge + fees + NHR).
      category: measure
      typical_aggregation: SUM
    - name: base_edge_ask
      type: FLOAT
      description: Ask-side value of base edge.
      category: measure
      typical_aggregation: SUM
    - name: fees
      type: FLOAT
      description: Per-lot trading fees applicable to this instrument.
      category: measure
      typical_aggregation: SUM
    - name: roll
      type: FLOAT
      description: Roll value at time of swing/trade.
      category: measure
      typical_aggregation: AVG
    - name: bv_side
      type: STRING
      description: Which side bid/ask of the baseVal the VT is swinging off.
      category: dimension
      filterable: true
    - name: delta_adjusted_base_price
      type: FLOAT
      description: Raw baseval plus odr/layered base adjustments.
      category: measure
      typical_aggregation: AVG
    - name: tv
      type: FLOAT
      description: Theoretical value the VT saw at time of swing/market trade.
      category: measure
      typical_aggregation: AVG
    - name: base_sequence_number
      type: INTEGER
      description: Base sequence number (numeric).
      category: measure
      typical_aggregation: AVG
    - name: option_sequence_number
      type: INTEGER
      description: Last received price tick for this option.
      category: measure
      typical_aggregation: AVG
    - name: base_instrument_hash
      type: STRING
      description: SHA256 hash identifier for the base instrument.
      category: identifier
      filterable: true
    - name: hardware_nic_rx_timestamp
      type: TIMESTAMP
      description: Hardware timestamp of moment price packet hit the network card.
      category: time
    - name: hardware_nic_rx_timestamp_ns
      type: INTEGER
      description: Nanosecond-precision component of hardware nic rx timestamp. Hardware timestamp of moment price
        packet hit the network card.
      category: time
    - name: event_timestamp
      type: TIMESTAMP
      description: Moment VT decided to trade (Swing) or processed event (MarketTrade).
      category: time
    - name: event_timestamp_ns
      type: INTEGER
      description: Nanosecond-precision component of event timestamp. Moment VT decided to trade (Swing) or processed
        event (MarketTrade).
      category: time
    - name: delete_side
      type: STRING
      description: Side (BID/ASK) of the quote that was deleted.
      category: dimension
      filterable: true
    - name: trigger_price
      type: FLOAT
      description: Price level that triggered the quote action.
      category: measure
      typical_aggregation: AVG
    - name: active_price
      type: FLOAT
      description: Current active price of the resting quote before the action.
      category: measure
      typical_aggregation: AVG
    - name: active_size
      type: INTEGER
      description: Current active size of the resting quote before the action.
      category: measure
      typical_aggregation: SUM
    - name: delete_type
      type: STRING
      description: Type classification of the quote deletion event.
      category: dimension
      filterable: true
    - name: trigger_type
      type: STRING
      description: Type of trigger that caused the quote action (price move, risk event, etc.).
      category: dimension
      filterable: true
    - name: batch_id
      type: INTEGER
      description: Batch identifier grouping related events together.
      category: identifier
      filterable: true
    - name: pcap_id
      type: STRING
      description: PCAP correlation identifier linking to raw network captures.
      category: identifier
      filterable: true
    - name: bucket
      type: STRING
      description: Bucket or group identifier for the quoter event.
      category: dimension
      filterable: true
    - name: event_type
      type: STRING
      description: VT Event that triggered the swing.
      category: dimension
      filterable: true
    - name: latency_stats_prcx
      type: INTEGER
      description: Latency statistics for the prcx processing stage (nanoseconds).
      category: measure
      typical_aggregation: AVG
    - name: latency_stats_prcs
      type: INTEGER
      description: Latency statistics for the prcs processing stage (nanoseconds).
      category: measure
      typical_aggregation: AVG
    - name: latency_stats_vtio
      type: INTEGER
      description: Latency statistics for the vtio processing stage (nanoseconds).
      category: measure
      typical_aggregation: AVG
    - name: latency_stats_bkio
      type: INTEGER
      description: Latency statistics for the bkio processing stage (nanoseconds).
      category: measure
      typical_aggregation: AVG
    - name: latency_stats_qmio
      type: INTEGER
      description: Latency statistics for the qmio processing stage (nanoseconds).
      category: measure
      typical_aggregation: AVG
    - name: latency_stats_itio
      type: INTEGER
      description: Latency statistics for the itio processing stage (nanoseconds).
      category: measure
      typical_aggregation: AVG
    - name: latency_stats_itex
      type: INTEGER
      description: Latency statistics for the itex processing stage (nanoseconds).
      category: measure
      typical_aggregation: AVG
    - name: inst_type_name
      type: STRING
      description: Human-readable instrument type name (e.g. option, future, stock), enriched from the instruments
        reference table.
      category: dimension
      filterable: true
    - name: strike
      type: FLOAT
      description: Strike price for options, enriched from the instruments reference table. NULL for non-option
        instruments.
      category: measure
      typical_aggregation: AVG
    - name: term
      type: STRING
      description: Expiry term/maturity label for the instrument, enriched from the instruments reference table.
      category: dimension
      filterable: true
    - name: option_type
      type: INTEGER
      description: Option type code (C=Call, P=Put), enriched from the instruments reference table. NULL for non-option
        instruments.
      category: dimension
      filterable: true
    - name: option_type_name
      type: STRING
      description: Human-readable option type name (Call/Put), enriched from the instruments reference table.
      category: dimension
      filterable: true
    - name: expiry_timestamp
      type: TIMESTAMP
      description: Expiry timestamp for the instrument, enriched from the instruments reference table.
      category: time
    - name: mako_symbol
      type: STRING
      description: Mako-internal symbol identifier, enriched from the instruments reference table via instrument_hash
        join.
      category: dimension
      filterable: true
    - name: currency
      type: INTEGER
      description: Enum appears as an int in composition.
      category: dimension
      filterable: true
    - name: is_book_resubmit
      type: BOOLEAN
      description: Boolean flag indicating whether the book resubmit condition is true.
      category: dimension
      filterable: true
    - name: pid
      type: INTEGER
      description: Process ID of the data source that produced this record.
      category: measure
      typical_aggregation: AVG
    - name: hostname
      type: STRING
      description: Hostname of the data source that produced this record.
      category: dimension
      filterable: true
    - name: inflight_trade_volume
      type: INTEGER
      description: Volume of inflight trade.
      category: measure
      typical_aggregation: SUM
    - name: bv_update_sequence_number
      type: INTEGER
      description: Price tick of base val instrument that triggered most recent baseval change.
      category: measure
      typical_aggregation: AVG
    - name: bv_update_instrument_hash
      type: STRING
      description: SHA256 of base val instrument that triggered last baseval change.
      category: identifier
      filterable: true
    - name: underlying_sequence_number
      type: INTEGER
      description: Sequence number of the hedge instrument.
      category: measure
      typical_aggregation: AVG
    - name: underlying_instrument_hash
      type: STRING
      description: SHA256 hash identifier for the underlying instrument.
      category: identifier
      filterable: true
    - name: mako_order_id
      type: INTEGER
      description: The Mako front-office id (OrderId in bookServer).
      category: identifier
      filterable: true
    - name: is_bv_invalid
      type: BOOLEAN
      description: Boolean flag indicating whether the base valuation was invalid at the time of this event.
      category: dimension
      filterable: true
    - name: exchange_timestamp
      type: TIMESTAMP
      description: Exchange-provided nano-second timestamp of the event.
      category: time
    - name: exchange_timestamp_ns
      type: INTEGER
      description: Nanosecond-precision component of exchange timestamp. Exchange-provided nano-second timestamp of the
        event.
      category: time
    - name: underlying_exe_exch
      type: INTEGER
      description: Exchange where the underlying trades.
      category: measure
      typical_aggregation: AVG
    - name: underlying_exe_exch_name
      type: STRING
      description: Exchange where the underlying trades (human-readable enum name).
      category: dimension
      filterable: true
    - name: is_spark
      type: BOOLEAN
      description: Denotes if VT is using a sparkOrder interface.
      category: dimension
      filterable: true
    - name: ref_inst_carry_id
      type: INTEGER
      description: Carry Id of last theo update received by algo for this instrument.
      category: identifier
      filterable: true
    - name: ref_inst_curve_id
      type: INTEGER
      description: Curve Id of last theo update received by algo for this instrument.
      category: identifier
      filterable: true
    - name: is_ref_theo_invalid
      type: BOOLEAN
      description: If the reference theos were valid at the time of the event.
      category: dimension
      filterable: true
    - name: lb_enabled
      type: BOOLEAN
      description: Boolean flag indicating whether the layered base feature was enabled.
      category: dimension
      filterable: true
    - name: edge_model_type
      type: INTEGER
      description: Numeric code for the edge computation model type used by the VT.
      category: dimension
      filterable: true
    - name: edge_model_type_name
      type: STRING
      description: Human-readable name for the edge model type enum value.
      category: dimension
      filterable: true
    - name: streamsource_stream_id
      type: INTEGER
      description: Stream source stream id identifier from the data streaming infrastructure.
      category: identifier
      filterable: true
    - name: streamsource_event_id
      type: INTEGER
      description: Stream source event id identifier from the data streaming infrastructure.
      category: identifier
      filterable: true
    - name: streamsource_message_id
      type: INTEGER
      description: Stream source message id identifier from the data streaming infrastructure.
      category: identifier
      filterable: true
    - name: datasource_pid
      type: INTEGER
      description: Data source pid identifier from the data pipeline infrastructure.
      category: measure
      typical_aggregation: AVG
    - name: datasource_hostname
      type: STRING
      description: Data source hostname identifier from the data pipeline infrastructure.
      category: dimension
      filterable: true
    - name: bid_price_0
      type: FLOAT
      description: Bid-side unadjusted top-of-book price.
      category: measure
      typical_aggregation: AVG
    - name: ask_price_0
      type: FLOAT
      description: Ask-side unadjusted top-of-book price.
      category: measure
      typical_aggregation: AVG
    - name: ask_volume_0
      type: INTEGER
      description: Ask-side unadjusted top-of-book volume.
      category: measure
      typical_aggregation: SUM
    - name: bid_volume_0
      type: INTEGER
      description: Bid-side unadjusted top-of-book volume.
      category: measure
      typical_aggregation: SUM
    - name: latency_stats_bvio
      type: INTEGER
      description: Latency statistics for the bvio processing stage (nanoseconds).
      category: measure
      typical_aggregation: AVG
    - name: latency_stats_delio
      type: INTEGER
      description: Latency statistics for the delio processing stage (nanoseconds).
      category: measure
      typical_aggregation: AVG
    - name: latency_stats_lockio
      type: INTEGER
      description: Latency statistics for the lockio processing stage (nanoseconds).
      category: measure
      typical_aggregation: AVG
    - name: ref_theoevent_stream_id
      type: INTEGER
      description: Reference theoevent stream id from the last vol curve update (theoServer callback).
      category: identifier
      filterable: true
    - name: ref_theoevent_event_id
      type: INTEGER
      description: Reference theoevent event id from the last vol curve update (theoServer callback).
      category: identifier
      filterable: true
    - name: is_spark_resubmit
      type: BOOLEAN
      description: Boolean flag indicating whether the spark resubmit condition is true.
      category: dimension
      filterable: true
    - name: last_trade_price
      type: FLOAT
      description: Price of last trade.
      category: measure
      typical_aggregation: AVG
    - name: price_level
      type: INTEGER
      description: Price level (numeric).
      category: measure
      typical_aggregation: AVG
    - name: total_market_volume
      type: INTEGER
      description: Volume of total market.
      category: measure
      typical_aggregation: SUM
    - name: total_our_volume
      type: INTEGER
      description: Volume of total our.
      category: measure
      typical_aggregation: SUM
    - name: delete_amend_threshold
      type: FLOAT
      description: Delete amend threshold (field).
      category: measure
      typical_aggregation: AVG
    - name: volume_reduced_so_far
      type: INTEGER
      description: Volume reduced so far (numeric).
      category: measure
      typical_aggregation: SUM
    - name: is_breached
      type: BOOLEAN
      description: Boolean flag indicating whether the breached condition is true.
      category: dimension
      filterable: true
    - name: num_of_breaches
      type: INTEGER
      description: Number of market-making compliance breaches so far today.
      category: measure
      typical_aggregation: AVG
    - name: max_breach_permitted
      type: INTEGER
      description: Maximum number of breaches permitted before penalty.
      category: measure
      typical_aggregation: AVG
    - name: requirement_check_timestamp
      type: TIMESTAMP
      description: Timestamp recording when the requirement check occurred.
      category: time
    - name: requirement_check_timestamp_ns
      type: INTEGER
      description: Nanosecond-precision component of the requirement check timestamp. Combine with
        requirement_check_timestamp for full nanosecond-resolution timing.
      category: time
