# Project Tracks

> Generated by Architect. 5 tracks across 5 waves.
> Run /conductor:implement to begin.

---

## [x] Track: Context Layer (Phase B)
- **ID:** 02_context_layer
- **Wave:** 2
- **Complexity:** L
- **Dependencies:** 01_foundation

---

## [x] Track: Agent Tools (Phase C)
- **ID:** 03_agent_tools
- **Wave:** 3
- **Complexity:** M
- **Dependencies:** 02_context_layer

---

## [x] Track: Agent Logic (Phase D)
- **ID:** 04_agent_logic
- **Wave:** 4
- **Complexity:** M
- **Dependencies:** 03_agent_tools

---

## [x] Track: Eval & Hardening (Phase E/F)
- **ID:** 05_eval_hardening
- **Wave:** 5
- **Complexity:** L
- **Dependencies:** 04_agent_logic

---

## [x] Track: Metadata Enrichment
- **ID:** 06_metadata_enrichment
- **Wave:** 3
- **Complexity:** L
- **Dependencies:** 02_context_layer
- **Notes:** Can run in parallel with Track 04. Enriches YAML catalog + BQ embeddings from kpi-findings and proto-findings source files.

---

## [x] Track: Fix Missing DB Dependencies
- **ID:** 07_dependency_fix
- **Wave:** 1
- **Complexity:** S
- **Dependencies:** []
- **Description:** Adds db-dtypes to resolve runtime errors in execute_sql tool when handling timestamps.

---

## [x] Track: Loop Fix & Performance Optimization
- **ID:** 08_loop_and_performance_fix
- **Wave:** 6
- **Complexity:** M
- **Dependencies:** 04_agent_logic, 05_eval_hardening
- **Description:** Fixes infinite reasoning loops and optimizes performance by reducing LLM round-trips and context size.

---

## [x] Track: Production Hardening (Serialization + Smart Loop Prevention)
- **ID:** 09_production_hardening
- **Wave:** 7
- **Complexity:** M
- **Dependencies:** 08_loop_and_performance_fix
- **Description:** Fixes JSON serialization crash for BQ Timestamp/Date/Decimal types and replaces blunt tool call counter with hash-based repetition detection.

---

## [x] Track: Metadata Gaps (Trade Taxonomy + Preferred Timestamps)
- **ID:** 10_metadata_gaps
- **Wave:** 8
- **Complexity:** M
- **Dependencies:** 09_production_hardening, 06_metadata_enrichment
- **Description:** Adds trade type taxonomy, preferred timestamp columns, and ATM strike resolution patterns to YAML catalog metadata.

---

## [x] Track: Gemini CLI Integration (MCP Server)
- **ID:** 11_gemini_cli_mcp
- **Wave:** 9
- **Complexity:** M
- **Dependencies:** 09_production_hardening
- **Description:** Exposes the NL2SQL agent as an MCP server with a single `ask_trading_data` tool. Gemini CLI connects via stdio transport. Includes Level 2 progress notifications.

---

## [x] Track: Column-Level Semantic Search (Two-Tier Retrieval)
- **ID:** 12_column_semantic_search
- **Wave:** 10
- **Complexity:** L
- **Dependencies:** 09_production_hardening, 10_metadata_gaps
- **Description:** Adds column-level vector search to replace table-description-only routing. Single BQ query searches 4,631 column embeddings, aggregates to tables, returns top columns per table. Fixes phantom `edge_bps` column. Based on RESQL/TailorSQL/bidirectional retrieval research (2025).