table:
  name: instrumentmetadata
  dataset: "{dataset_prefix}brazil_data"
  fqn: '{project}.{dataset_prefix}brazil_data.instrumentmetadata'
  layer: data
  description: "Instrument metadata attributes providing additional reference data beyond the core instruments table. Contains exchange-specific metadata fields for instrument classification and configuration. Partitioned by trade_date."
  partition_field: trade_date
  columns:
    - name: kafka_partition
      type: INTEGER
      description: Kafka partition number from which this record was consumed. Used internally for data pipeline
        tracking and replay.
      category: identifier
      filterable: true
      source: "kafka infrastructure"
    - name: kafka_offset
      type: INTEGER
      description: Kafka offset of the record within its partition. Used for exactly-once processing guarantees and data
        pipeline replay.
      category: identifier
      filterable: true
      source: "kafka infrastructure"
    - name: trade_date
      type: DATE
      description: Trading session date used as the partition column. Always filter on this field for efficient queries.
      category: time
      filterable: true
      source: "PosData.proto::tradeDate"
      synonyms: ["date", "business date", "trading date"]
    - name: instrument_hash
      type: STRING
      description: Unique SHA256 hash identifier for the instrument, deterministically computed from the instrument
        defining attributes. Used as the primary join key across all data and KPI tables.
      category: identifier
      filterable: true
      source: "PosData.proto::instrumentHash"
      synonyms: ["instrument id", "instrument key"]
    - name: message_trade_date
      type: DATE
      description: Trade date embedded within the original proto message.
      category: time
      source: "derived (data-loader)"
    - name: is_market_maker_instrument
      type: BOOLEAN
      description: Boolean flag indicating whether the market maker instrument condition is true.
      category: dimension
      filterable: true
