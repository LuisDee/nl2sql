table:
  name: orderposdata
  dataset: "{dataset_prefix}brazil_data"
  fqn: '{project}.{dataset_prefix}brazil_data.orderposdata'
  layer: data
  description: "Order position data combining order execution details with resulting position changes. Links order fill events to position snapshots for order-level position tracking. Partitioned by trade_date."
  partition_field: trade_date
  columns:
    - name: trade_date
      type: DATE
      description: Trading session date used as the partition column. Always filter on this field for efficient queries.
      category: time
      filterable: true
    - name: order_id
      type: INTEGER
      description: Mako-internal order identifier linking fills to the parent order.
      category: identifier
      filterable: true
    - name: prev_order_id
      type: INTEGER
      description: Prev order id (numeric).
      category: identifier
      filterable: true
    - name: order_book_side
      type: INTEGER
      description: Side of the order book (BID/ASK) for this position.
      category: dimension
      filterable: true
    - name: level
      type: INTEGER
      description: Price level index in the order book.
      category: measure
      typical_aggregation: AVG
    - name: position_this_level
      type: INTEGER
      description: Position this level (numeric).
      category: measure
      typical_aggregation: AVG
    - name: quantity_this_level_ahead
      type: INTEGER
      description: Quantity this level ahead (numeric).
      category: measure
      typical_aggregation: AVG
    - name: quantity_this_level_behind
      type: INTEGER
      description: Quantity this level behind (numeric).
      category: measure
      typical_aggregation: AVG
    - name: quantity_ahead_all
      type: INTEGER
      description: Quantity ahead all (numeric).
      category: measure
      typical_aggregation: AVG
    - name: last_order_modification_timestamp
      type: INTEGER
      description: Timestamp recording when the last order modification occurred.
      category: time
    - name: reason
      type: INTEGER
      description: Reason code for this order or event action.
      category: measure
      typical_aggregation: AVG
    - name: reason_name
      type: STRING
      description: Human-readable name for the reason enum value.
      category: dimension
      filterable: true
    - name: exchange_timestamp
      type: TIMESTAMP
      description: Exchange-provided nano-second timestamp of the event.
      category: time
    - name: hw_nic_rx_timestamp
      type: TIMESTAMP
      description: Timestamp recording when the hw nic rx occurred.
      category: time
    - name: mako_ingress_timestamp
      type: TIMESTAMP
      description: Timestamp injected by the switch when the data packet arrives into Mako network.
      category: time
    - name: software_timestamp
      type: TIMESTAMP
      description: Timestamp recording when the software occurred.
      category: time
    - name: exchange_timestamp_ns
      type: INTEGER
      description: Nanosecond-precision component of exchange timestamp. Exchange-provided nano-second timestamp of the
        event.
      category: time
    - name: hw_nic_rx_timestamp_ns
      type: INTEGER
      description: Nanosecond-precision component of the hw nic rx timestamp. Combine with hw_nic_rx_timestamp for full
        nanosecond-resolution timing.
      category: time
    - name: mako_ingress_timestamp_ns
      type: INTEGER
      description: Nanosecond-precision component of mako ingress timestamp. Timestamp injected by the switch when the
        data packet arrives into Mako network.
      category: time
    - name: software_timestamp_ns
      type: INTEGER
      description: Nanosecond-precision component of the software timestamp. Combine with software_timestamp for full
        nanosecond-resolution timing.
      category: time
    - name: instrument_hash
      type: STRING
      description: Unique SHA256 hash identifier for the instrument, deterministically computed from the instrument
        defining attributes. Used as the primary join key across all data and KPI tables.
      category: identifier
      filterable: true
    - name: mako_symbol
      type: STRING
      description: Mako-internal symbol identifier, enriched from the instruments reference table via instrument_hash
        join.
      category: dimension
      filterable: true
    - name: price
      type: FLOAT
      description: Price of the trade or order.
      category: measure
      typical_aggregation: AVG
    - name: quantity
      type: INTEGER
      description: Quantity of the trade or order in number of lots.
      category: measure
      typical_aggregation: AVG
    - name: data_timestamp
      type: TIMESTAMP
      description: Custom timestamp for ordering (hardwareNicRxTimestamp or makoIngressTimestamp).
      category: time
    - name: data_timestamp_ns
      type: INTEGER
      description: Nanosecond-precision component of data timestamp. Custom timestamp for ordering
        (hardwareNicRxTimestamp or makoIngressTimestamp).
      category: time
    - name: data_order_identifier
      type: INTEGER
      description: Sequence number relative to current exchange message for deterministic ordering.
      category: measure
      typical_aggregation: AVG
